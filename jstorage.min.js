(function(f){function i(){try{if(window.localStorage)b=window.localStorage;else if(window.globalStorage)b=window.globalStorage[document.domain]}catch(a){}if(!b){c=document.createElement("link");if(c.addBehavior){c.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(c);c.load("jStorage");var d="{}";try{d=c.getAttribute("jStorage")}catch(l){}b.jStorage=d}else{c=null;return}}if(b.jStorage)try{e=j(b.jStorage)}catch(m){b.jStorage="{}"}else b.jStorage="{}"}function g(){try{if(b)b.jStorage=
k(e);if(c){c.setAttribute("jStorage",b.jStorage);c.save("jStorage")}}catch(a){}}function h(a){if(!a||typeof a!="string"&&typeof a!="number")throw new TypeError("Key name must be string or numeric");return true}if(!f||!(f.toJSON||Object.toJSON||window.JSON))throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");var e={},b={jStorage:"{}"},c=null,k=f.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),j=f.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(a){return String(a).evalJSON()};
f.jStorage={version:"0.1.2.1",set:function(a,d){h(a);e[a]=d;g();return d},get:function(a,d){h(a);if(a in e)return e[a];return typeof d=="undefined"?null:d},deleteKey:function(a){h(a);if(a in e){delete e[a];g();return true}return false},flush:function(){e={};g();window.localStorage&&localStorage.clear();return true}};i()})(window.jQuery||window.$);
